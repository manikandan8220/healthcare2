{% load static %}
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<style>
body {
    font-family: Arial, sans-serif;
    font-size: 12px;
    color: #000;
}

/* HEADER */
.header {
    width: 100%;
    border-bottom: 2px solid #0ea5e9;
    padding-bottom: 10px;
    margin-bottom: 20px;
}
.header-table {
    width: 100%;
}
.logo {
    width: 80px;
}
.hospital-name {
    font-size: 20px;
    font-weight: bold;
    color: #0ea5e9;
}
.sub {
    font-size: 11px;
    color: #555;
}

/* SECTION */
.section-title {
    font-weight: bold;
    margin-top: 18px;
    margin-bottom: 6px;
    color: #0f172a;
}

/* TABLE */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 8px;
}
th, td {
    border: 1px solid #000;
    padding: 6px;
    text-align: center;
}
th {
    background: #e5f6fd;
    font-weight: bold;
}

/* FOOTER */
.footer {
    margin-top: 35px;
    font-size: 11px;
}
.signature {
    margin-top: 40px;
    width: 250px;
    text-align: center;
}
.signature-line {
    border-top: 1px solid #000;
    margin-top: 25px;
}
</style>

</head>

<body>

<!-- HEADER -->
<div class="header">
    <table class="header-table">
        <tr>
            <td width="20%">
                 <img src="{% static 'images/name1.jpg' %}" class="logo" alt="Hospital Logo" style="background-color: aqua;">
            </td>
            <td width="80%">
                <div class="hospital-name">HEALTHCARE MULTI SPECIALITY HOSPITAL</div>
                <div class="sub">
                    24x7 Emergency & Critical Care <br>
                    No.12, Main Road, Chennai – Tamil Nadu <br>
                    Phone: +91 98765 43210 | Email: care@healthcare.com
                </div>
            </td>
        </tr>
    </table>
</div>

<!-- REPORT INFO -->
<table>
    <tr>
        <th>Report Date</th>
        <td>{% now "d M Y" %}</td>
        <th>Report Time</th>
        <td>{% now "H:i A" %}</td>
    </tr>
</table>

<!-- PATIENT INFO -->
<div class="section-title">Patient Information</div>
<table>
    <tr>
        <th>Patient Name</th>
        <td>{{ patient.name }}</td>
        <th>Gender</th>
        <td>{{ patient.gender }}</td>
    </tr>
    <tr>
        <th>Age</th>
        <td>{{ patient.age }}</td>
        <th>Patient ID</th>
        <td>{{ patient.id }}</td>
    </tr>
</table>

<!-- HEALTH SUMMARY -->
<div class="section-title">Health Summary</div>
<table>
    <tr>
        <th>Total Records</th>
        <td>{{ records|length }}</td>
        <th>Current Status</th>
        <td>
            {% if records.last.heart_rate and records.last.heart_rate > 100 %}
                CRITICAL
            {% else %}
                STABLE
            {% endif %}
        </td>
    </tr>
</table>

<!-- VITALS -->
<div class="section-title">Vitals History</div>
<table>
    <thead>
        <tr>
            <th>Heart Rate (bpm)</th>
            <th>Blood Pressure</th>
            <th>Sugar (mg/dL)</th>
            <th>Temperature (°C)</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
        {% for r in records %}
        <tr>
            <td>{{ r.heart_rate|default:"--" }}</td>
            <td>{{ r.blood_pressure|default:"--" }}</td>
            <td>{{ r.sugar_level|default:"--" }}</td>
            <td>{{ r.temperature|default:"--" }}</td>
            <td>{{ r.updated_at|date:"d M Y" }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- DOCTOR SIGNATURE -->
<div class="footer">
    <table width="100%">
        <tr>
            <td width="60%"></td>
            <td width="40%" align="center">
                <div class="signature">
                    <strong>Dr. S. Kumar, MD</strong><br>
                    Consultant Physician
                    <div class="signature-line"></div>
                    Doctor Signature
                </div>
            </td>
        </tr>
    </table>

    <p style="margin-top:20px;">
        * This is a computer-generated medical report. No physical signature required.
    </p>
</div>

</body>
</html>
